(function(t){function e(e){for(var o,a,u=e[0],s=e[1],c=e[2],f=0,d=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,u=1;u<n.length;u++){var s=n[u];0!==i[s]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"4a0d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("TurnTable")],1)},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"turnTable"},[n("div",{staticClass:"turnTable__body"},[n("canvas",{staticClass:"turnTable__canvas",class:t.animitionType,style:{width:t.config.baseSize+"px",height:t.config.baseSize+"px"}})]),n("div",{staticClass:"turnTable__button",on:{click:t.animitionProc}},[n("div",{staticClass:"turnTable__arrow"}),n("div",{staticClass:"turnTable__button__content"},[n("span",{staticClass:"turnTable__button__text"},[t._v(t._s(t.config.buttonText))])])])])])},u=[],s=(n("6c7b"),n("5df3"),n("1c4c"),n("ac6a"),{name:"TurnTable",data:function(){return{isRunning:!1,turnStatus:{currentDeg:0,targetDeg:0,rollBackDeg:0},defaultGifts:[{chance:10,text:"做",textColor:"",textSize:"",backgroundColor:"",edit:!1},{chance:10,text:"不做",textColor:"",textSize:"",backgroundColor:"",edit:!1}],config:{},defaultConfig:{autoStop:!0,runTime:2,rollBackRange:.25,showAlert:!0,baseSize:500,singleColor:"#488d12",doubleColor:"#ce0235",borderWidth:1,borderColor:"#ffffff",textColor:"#fff",buttonColor:"#f6d7d7",buttonText:"GO"}}},watch:{isRunning:function(t){if(!this.config.autoStop){var e=t?"running":"paused";document.documentElement.style.setProperty("--animitionState",e)}},turnStatus:{handler:function(){this.updateturnStatus()},deep:!0}},computed:{animitionType:function(){return{"turnTable__canvas--manualTrun":!this.config.autoStop,"turnTable__canvas--autoTrun":this.isRunning&&this.config.autoStop}},countDataChance:function(){var t=0;return this.gifts.forEach((function(e){t+=e.chance})),t},defaultGiftBackgroundColor:function(){return this.getDefaultGiftBackgroundColor()},pixelRatio:function(){return 2*window.devicePixelRatio||2}},methods:{getDefaultGiftBackgroundColor:function(t){var e=t||this.gifts.length;return e%2===0?this.config.doubleColor:this.config.singleColor},getDefaultGfits:function(){return Array.from(this.defaultGifts)},getDefaultConfig:function(){var t=window.innerHeight,e=window.innerWidth;return this.defaultConfig.baseSize=t>e?Math.floor(.8*e):Math.floor(.6*t),Object.assign({},this.defaultConfig)},drawCanvas:function(){var t=this,e=this.config.baseSize*(this.pixelRatio/2),n=document.querySelector(".turnTable__canvas"),o=n.getContext("2d");n.setAttribute("width",this.config.baseSize*this.pixelRatio),n.setAttribute("height",this.config.baseSize*this.pixelRatio),this.giftDegs=[];var i=0;this.gifts.forEach((function(n,r){var a=n.chance/t.countDataChance*360,u=a*(Math.PI/180);t.giftDegs[r]={from:0===r?0:t.giftDegs[r-1].to,to:0===r?a:t.giftDegs[r-1].to+a,name:n.text},o.save(),o.beginPath(),o.translate(e,e),o.moveTo(0,0),o.rotate(i),o.arc(0,0,e-t.config.borderWidth,0,u,!1),i+=u,o.fillStyle=n.backgroundColor||t.getDefaultGiftBackgroundColor(r),o.fill(),o.lineWidth=t.config.borderWidth*t.pixelRatio,o.strokeStyle=t.config.borderColor,o.closePath(),o.stroke(),o.rotate(u/2),o.fillStyle=n.textColor||t.config.textColor,o.font=n.textSize?"".concat(n.textSize,"px Microsoft JhengHei"):"".concat(t.config.baseSize/n.text.length*(t.pixelRatio/4),"px Microsoft JhengHei"),o.textBaseline="middle",o.fillText(n.text,e/2.25,0),o.restore()})),this.config.autoStop?n.addEventListener("animationend",this.autoTurnStop):n.removeEventListener("animationend",this.autoTurnStop)},animitionProc:function(){this.config.autoStop&&this.autoTurnStart()},autoTurnStart:function(){if(!this.isRunning){var t=Math.floor(360*Math.random())+1440;this.turnStatus.targetDeg=t,this.isRunning=!0}},autoTurnStop:function(){this.isRunning=!1,this.turnStatus.currentDeg=Math.floor(this.turnStatus.targetDeg%360)},buideTurnTable:function(){document.documentElement.style.setProperty("--turnTableSize","".concat(this.config.baseSize+20,"px")),document.documentElement.style.setProperty("--buttonSize","".concat(this.config.baseSize/3.5,"px")),document.documentElement.style.setProperty("--buttonFontSize","".concat(this.config.baseSize/10,"px")),document.documentElement.style.setProperty("--arrowHeight","".concat(this.config.baseSize/7,"px")),document.documentElement.style.setProperty("--arrowWidth","".concat(this.config.baseSize/5,"px")),document.documentElement.style.setProperty("--buttonColor","".concat(this.config.buttonColor)),document.documentElement.style.setProperty("--runTime","".concat(this.config.runTime,"s")),document.documentElement.style.setProperty("--animitionState","paused"),this.resultList=[],this.drawCanvas()},updateturnStatus:function(){document.documentElement.style.setProperty("--targetDeg","".concat(this.turnStatus.targetDeg,"deg")),document.documentElement.style.setProperty("--currentDeg","".concat(this.turnStatus.currentDeg,"deg")),document.documentElement.style.setProperty("--rollBackDeg","".concat(this.turnStatus.rollBackDeg))}},beforeMount:function(){this.config=this.getDefaultConfig(),this.gifts=this.getDefaultGfits()},mounted:function(){this.buideTurnTable()}}),c=s,l=(n("7014"),n("2877")),f=Object(l["a"])(c,a,u,!1,null,null,null),d=f.exports,g={name:"app",components:{TurnTable:d},data:function(){return{}},methods:{}},h=g,p=(n("5c0b"),Object(l["a"])(h,i,r,!1,null,null,null)),b=p.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(b)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("e332"),i=n.n(o);i.a},7014:function(t,e,n){"use strict";var o=n("4a0d"),i=n.n(o);i.a},e332:function(t,e,n){}});